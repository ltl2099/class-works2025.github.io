<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安顺学院2025植物保护班级事务协同工作台</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>安顺学院2025植物保护班级事务协同工作台</h1>
        <nav>
            <button id="nav-kanban">班级事务看板</button>
            <button id="nav-log">班委工作日志</button>
            <button id="nav-settings">设置与积分管理</button>
            <button id="logout">退出登录</button>
        </nav>
    </header>
    <main>
        <!-- Kanban Board Section -->
        <section id="kanban-section" class="section">
            <h2>班级事务看板</h2>
            <button id="add-task">添加新任务</button>
            <div class="kanban-board">
                <div class="column" id="to-do" data-status="to-do">
                    <h3>待办</h3>
                    <div class="tasks"></div>
                </div>
                <div class="column" id="in-progress" data-status="in-progress">
                    <h3>进行中</h3>
                    <div class="tasks"></div>
                </div>
                <div class="column" id="done" data-status="done">
                    <h3>已完成</h3>
                    <div class="tasks"></div>
                </div>
                <div class="column" id="cancelled" data-status="cancelled">
                    <h3>已取消/搁置</h3>
                    <div class="tasks"></div>
                </div>
            </div>
        </section>

        <!-- Daily Log Section -->
        <section id="log-section" class="section hidden">
            <h2>班委工作日志</h2>
            <button id="add-log">添加日志记录</button>
            <table id="log-table">
                <thead>
                    <tr>
                        <th>日期</th>
                        <th>负责人</th>
                        <th>事项类别</th>
                        <th>内容简述</th>
                        <th>关键链接/截图</th>
                        <th>状态</th>
                        <th>备注</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Settings & Points Section -->
        <section id="settings-section" class="section hidden">
            <h2>设置与积分管理</h2>
            <div class="settings">
                <h3>班委密码设置</h3>
                <input type="password" id="new-password" placeholder="新密码">
                <input type="password" id="confirm-password" placeholder="确认新密码">
                <button id="save-password">保存密码</button>
                <p id="password-feedback"></p>
            </div>
            <div class="points-rules">
                <h3>积分规则说明</h3>
                <ul>
                    <li>主动报名：+4分</li>
                    <li>响应号召：+3分</li>
                    <li>摊派：+2分</li>
                    <li>特殊贡献：需两位以上班委确认，加分根据贡献程度</li>
                </ul>
            </div>
            <div class="points-management">
                <h3>班级积分记录</h3>
                <button id="add-point">添加积分记录</button>
                <table id="points-table">
                    <thead>
                        <tr>
                            <th>日期</th>
                            <th>姓名</th>
                            <th>事项</th>
                            <th>积分变动</th>
                            <th>事由</th>
                            <th>班委确认</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <p id="total-points">班级当前总积分：0</p>
            </div>
        </section>
    </main>

    <!-- Login Modal -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <h2>登录</h2>
            <input type="password" id="login-password" placeholder="请输入密码">
            <button id="login-submit">登录</button>
            <p id="login-feedback"></p>
        </div>
    </div>

    <!-- Set Password Modal (for first time) -->
    <div id="set-password-modal" class="modal">
        <div class="modal-content">
            <h2>设置初始密码</h2>
            <input type="password" id="set-new-password" placeholder="新密码">
            <input type="password" id="set-confirm-password" placeholder="确认新密码">
            <button id="set-password-submit">保存</button>
            <p id="set-password-feedback"></p>
        </div>
    </div>

    <!-- Task Modal -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <h2 id="task-modal-title">任务详情</h2>
            <input type="text" id="task-title" placeholder="任务标题">
            <textarea id="task-description" placeholder="详情描述"></textarea>
            <input type="text" id="task-assignee" placeholder="负责人">
            <input type="date" id="task-due-date">
            <select id="task-priority">
                <option value="high">高</option>
                <option value="medium">中</option>
                <option value="low">低</option>
            </select>
            <select id="task-status">
                <option value="to-do">待办</option>
                <option value="in-progress">进行中</option>
                <option value="done">已完成</option>
                <option value="cancelled">已取消/搁置</option>
            </select>
            <input type="text" id="task-reason" placeholder="取消/搁置原因" class="hidden">
            <input type="text" id="task-links" placeholder="关联资料/图片链接">
            <button id="save-task">保存</button>
            <button id="close-task-modal">关闭</button>
            <p id="task-feedback"></p>
        </div>
    </div>

    <!-- Log Modal -->
    <div id="log-modal" class="modal">
        <div class="modal-content">
            <h2 id="log-modal-title">日志详情</h2>
            <input type="date" id="log-date">
            <input type="text" id="log-assignee" placeholder="负责人">
            <input type="text" id="log-category" placeholder="事项类别">
            <textarea id="log-description" placeholder="内容简述（1-2句话）"></textarea>
            <input type="text" id="log-link" placeholder="关键链接/截图">
            <input type="text" id="log-status" placeholder="状态">
            <textarea id="log-notes" placeholder="备注"></textarea>
            <button id="save-log">保存</button>
            <button id="close-log-modal">关闭</button>
            <p id="log-feedback"></p>
        </div>
    </div>

    <!-- Point Modal -->
    <div id="point-modal" class="modal">
        <div class="modal-content">
            <h2 id="point-modal-title">积分记录详情</h2>
            <input type="date" id="point-date">
            <input type="text" id="point-name" placeholder="姓名">
            <input type="text" id="point-item" placeholder="事项">
            <input type="number" id="point-change" placeholder="积分变动">
            <textarea id="point-reason" placeholder="事由"></textarea>
            <input type="text" id="point-confirmed" placeholder="班委确认">
            <button id="save-point">保存</button>
            <button id="close-point-modal">关闭</button>
            <p id="point-feedback"></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
